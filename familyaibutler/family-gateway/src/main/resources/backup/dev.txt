spring:
  data:
    redis:
      host: 127.0.0.1
      port: 6379
      database: 2
      timeout: 30000ms
      lettuce:
        pool:
          max-active: 20
          max-wait: -1
          max-idle: 8
          min-idle: 0
  cloud:
    gateway:
      routes:
        - id: familyBaseModel
          uri: lb://family-base-model
          predicates:
            - name: Path
              args:
                - /base/**
          filters:
            - StripPrefix=1
        - id: AIBaseModel
          uri: lb://family-AI-model
          predicates:
            - name: Path
              args:
                - /ai/**
          filters:
            - StripPrefix=1
            - name: RequestRateLimiter
              args:
                key-resolver: '#{@pathKeyResolver}'
                redis-rate-limiter.replenishRate: 1
                redis-rate-limiter.burstCapacity: 1

knife4j:
  gateway:
    enabled: true
    routes:
      - name: 基础服务
        url: /base/v3/api-docs?group=default
        service-name: family-base-model
        context-path: /
        order: 1
      - name: ai
        url: /ai/v3/api-docs?group=default
        service-name: family
        context-path: /
        order: 2


logging:
  level:
    root: info